(window.webpackJsonp=window.webpackJsonp||[]).push([["GrowthDashboardModalContainer"],{LcY7:function(t,e,r){"use strict";r.r(e);var a=r("VfuR"),s=r.n(a),i=r("mEYk"),o=r.n(i),n=r("Ktcs"),c=r("PO7J"),l=r("TlsE"),p=r("rQY4");const d=t=>{const e=Date.now();return t&&t<e},u=(t,e,r,a)=>({inTrial:d(r)?null:{createdTs:t,expiresTs:e},hasTrialed:d(r)?{lastTrialStarted:t,lastTrialExpired:r}:null,id:a}),T=t=>{if(0===t.length)return t;const e={};t.forEach(t=>{const{trials:r,createdAt:a,endsAt:s,removedAt:i}=t;r.forEach(t=>{const{name:r,id:o}=t,n=p.a[r];e[n]=u(a,s,i,o)})});return e};var m=()=>l.a.getTrialState().then(t=>T(t)),b=r("eYK3");var O={[b.N]:c.Q,[b.L]:c.O,[b.K]:c.M,[b.A]:c.G,[b.z]:c.C,[b.y]:c.z,[b.S]:c.V,[b.Q]:c.T,[b.P]:c.S,[b.g]:c.h,[b.f]:c.g,[b.e]:c.f,[b.H]:c.J,[b.G]:c.I,[b.F]:c.H,[b.C]:c.B,[b.B]:c.A,[b.j]:c.k,[b.i]:c.j,[b.h]:c.i,[b.a]:c.b,[b.J]:c.L,[b.r]:c.q,[b.W]:c.ab,[b.b]:c.c,[b.ab]:c.fb,[b.w]:c.x,[b.v]:c.l,[b.V]:c.r,[b.T]:c.X,[b.M]:c.P,[b.R]:c.U,[b.q]:c.p,[b.D]:c.D,[b.n]:c.Y,[b.s]:c.s,[b.O]:c.R,[b.t]:c.u,[b.u]:c.v,[b.d]:c.e,[b.I]:c.K,[b.U]:c.Z,[b.Z]:c.eb,[b.Y]:c.cb,[b.o]:c.n,[b.c]:c.d,[b.p]:c.o,[b.k]:c.m};const x=()=>{const[t,e]=Object(n.useState)(null),[r,a]=Object(n.useState)(null),[s,i]=Object(n.useState)(null);Object(n.useEffect)(()=>{m().then(t=>{const r=Object.keys(t).reduce((e,r)=>{const a=t[r],s=O[r];a.hasTrialed?e.expiredTrials.push(s):e.activeTrials.push(s);return e},{activeTrials:[],expiredTrials:[]});e(r.activeTrials);a(r.expiredTrials);i(r.activeTrials.length>1)})},[]);const o=[s,t,r].some(t=>null===t);return{activeTrials:t,expiredTrials:r,isMultiTrial:s,isLoadingTrackingProps:o}};var h=r("g+dq"),j=r.n(h),g=r("yYAF");const f="TRIAL_AUTOMATION_ACTION",w=()=>{const t="growth-modals/v1/modals";return j.a.get(`${Object(g.getFullUrl)("app-api")}/${t}`).catch(t=>{if(404===t.status){return{}}throw t})},I=(t,e,r)=>{const a="growth-modals/v1/modals";let s;s=r?e===f?`${a}/for-user/${e}?externalIdentifier=${t}`:`${a}/for-user/${e}`:`${a}/${t}/${e}`;return j.a.delete(""+s).catch(r=>{o.a.captureException(new Error("Failed to dismiss trial modal"),{extra:{error:r,externalIdentifier:t,modalName:e}})})},A={ACTIVE:"ACTIVE",TRIAL_AUTOMATION_ACTION:"TRIAL_AUTOMATION_ACTION",EXPIRED:"EXPIRED",EXPIRING_SOON:"EXPIRING_SOON"};var P=r("GgP/");let E=[];const v=t=>{E=t},y=()=>{const t=Object(P.userInfoSync)();v(t.gates)},M=()=>{0===E.length&&y();return E.includes("GrowthModals:PortalUserDismissal")};var _=r("9f1P"),C=r.n(_),R=r("+KD7"),k=r("TMtl"),S=r("sl/w"),N=r("DqRu"),L=r("oxSA"),$=r("qS8i"),q=r("BiPx"),D=r("AuX0"),B=r("6A2w"),U=r("jtRn"),K=r("aJmV");const H=t=>{window.hubspot.wordpress?window.open(t,"_top"):window.location.href=t};var F=r("LZPL"),G=r.n(F);r("Gpbg"),r("X3ue");var J={HUB_MARKETING:"marketing",HUB_SALES:"sales",HUB_CMS:"cmsHub",HUB_SERVICE:"service",HUB_OPERATIONS:"operations"},Y=r("nDpY"),z=r.n(Y);const V=t=>({[J.HUB_MARKETING]:`/workflows/${z.a.get()}/platform/create/template?flowTypeId=0-1&scrollToElementId=scroll-to-new-action-config-0-1`,[J.HUB_SALES]:`/sequences/${z.a.get()}/create`}[t]);var X=r("QgEn");const Q=(t,e)=>({app:t,screen:"index",uniqueId:"trial-action-prompt",upgradeProduct:e}),W=C.a.div.withConfig({displayName:"TrialInstantActionPrompt__StickyContainer",componentId:"sc-7jk68x-0"})(["position:fixed;bottom:90px;right:16px;z-index:100;width:450px;box-shadow:2px 2px 7px ",";"],R.FLINT),Z=({activeTrials:t,app:e,expiredTrials:r,isMultiTrial:a,upgradeProduct:s})=>{const[i,o]=Object(n.useState)(!0),c=M();Object(n.useEffect)(()=>{K.a("trialActionPromptInteraction",Object.assign({action:"viewed"},Q(e,s),{isMultiTrial:a,activeTrials:t,expiredTrials:r}))},[t,e,r,a,s]);const l=()=>{K.a("trialActionPromptInteraction",Object.assign({action:"clicked close prompt"},Q(e,s),{isMultiTrial:a,activeTrials:t,expiredTrials:r}));o(!1);I(s,A.TRIAL_AUTOMATION_ACTION,c)},p=s.split("-")[0],d=()=>{K.b("trialActionPromptInteraction",Object.assign({action:"clicked action"},Q(e,s),{isMultiTrial:a,activeTrials:t,expiredTrials:r}));I(s,A.TRIAL_AUTOMATION_ACTION,c);const i=V(p);H(i)};return i?Object(X.jsx)(W,{"data-test-id":"trial-instant-action-prompt",children:Object(X.jsxs)(L.a,{children:[Object(X.jsx)(q.a,{"data-test-id":"trial-instant-action-prompt-close",onClick:l}),Object(X.jsx)(B.a,{children:Object(X.jsx)(U.a,{children:Object(X.jsx)(S.a,{message:`trial-components-library.trialInstantActionPrompt.${p}.title`})})}),Object(X.jsxs)($.a,{children:[Object(X.jsx)("p",{style:{fontWeight:k.m},children:Object(X.jsx)(S.a,{message:`trial-components-library.trialInstantActionPrompt.${p}.subtitle`})}),Object(X.jsx)("p",{children:Object(X.jsx)(S.a,{message:`trial-components-library.trialInstantActionPrompt.${p}.body`})})]}),Object(X.jsx)(D.a,{children:Object(X.jsx)(N.a,{"data-test-id":"trial-instant-action-prompt-cta",use:"primary",onClick:d,children:Object(X.jsx)(S.a,{message:`trial-components-library.trialInstantActionPrompt.${p}.buttonLabel`})})})]})}):null};Z.propTypes={activeTrials:s.a.array.isRequired,app:s.a.string.isRequired,expiredTrials:s.a.array.isRequired,isMultiTrial:s.a.bool.isRequired,upgradeProduct:s.a.string.isRequired};const tt=[c.O,c.M,c.C,c.z],et=1602216e6,rt=({app:t})=>{const[e,r]=Object(n.useState)(void 0),{activeTrials:a,expiredTrials:s,isMultiTrial:i,isLoadingTrackingProps:c}=x(),l=M();Object(n.useEffect)(()=>{w().then(({modal:t,data:e})=>{if(!t||!e)return;const{name:a}=t,{trialName:s,createdAt:i}=e,o=a===A.TRIAL_AUTOMATION_ACTION;o&&i>et&&tt.includes(s)?r(s):o&&I(s,A.TRIAL_AUTOMATION_ACTION,l)}).catch(e=>{o.a.captureException(new Error("Failed to fetch trial modal status"),{extra:{error:e,app:t}})})},[]);return!e||c?null:Object(X.jsx)(Z,{activeTrials:a,app:t,expiredTrials:s,isMultiTrial:i,upgradeProduct:e})};rt.propTypes={app:s.a.string.isRequired};function at(t,e,r){if(window.newrelic){const{errorCode:a,errorMessage:s,message:i,responseJSON:o,status:n,data:c}=e;window.newrelic.addPageAction("ui-addon-upgrades-error",Object.assign({location:t,errorCode:a,errorMessage:s,message:i,responseJSON:o,status:n,data:c},r))}}class st extends n.Component{constructor(...t){super(...t);this.state={error:!1}}static getDerivedStateFromError(){return{error:!0}}componentDidCatch(t,e){o.a.captureException(t);const r=t;r.info=JSON.stringify(e);at(this.props.boundaryName,r)}render(){return this.state.error?null:this.props.children}}var it=st,ot=r("D2Y9"),nt=r("WfsF");const ct="billing",lt="team",pt="marketable-contacts-write",dt=Object(ot.parse)(window.location.search.substring(1)).isAdmin,ut=G.a.isQa()&&"true"===dt,Tt=G.a.isQa()&&"false"===dt,mt=(t,e=lt)=>{if(ut)return!0;if(Tt)return!1;if(e===ct){return-1!==t.scopes.indexOf("billing-write")}if(e===pt){return-1!==t.scopes.indexOf("marketable-contacts-write")}const r=-1!==t.scopes.indexOf("hub-owner"),a=-1!==t.scopes.indexOf("hub-parcel-write");return r||a},bt=t=>Object(nt.a)().then(({user:e})=>mt(e,t)).catch(t=>{at("getIsAdmin",t);return!1}),Ot=t=>j.a.get(`trials/v1/json/${t}?portalId=${z.a.get()}`).then(t=>t.jsonData),xt=(t,e)=>j.a.put("trials/v1/json",{data:{lookupKey:t,jsonData:e}}),ht=(c.C,c.O,c.z,c.M,c.T,c.S,c.I,c.H,c.z,c.M,c.T,c.S,c.I,c.H,c.C,c.O,{DEMO_PROMPT:"demo-prompt",KB_ARTICLE:"kb-article"}),jt={[c.C]:{campaigns:{href:"https://knowledge.hubspot.com/campaigns/create-campaigns",promptType:ht.KB_ARTICLE},seo:{href:`/seo-demo/${z.a.get()}/seo-loading?flowId=seo&source=seo-demo-prompt`,promptType:ht.DEMO_PROMPT},social:{href:`/social-demo/${z.a.get()}/social-intro?flowId=social&source=social-demo-prompt`,promptType:ht.DEMO_PROMPT},workflows:{href:`/workflows-demo/${z.a.get()}/reports-dashboard?flowId=nurture-qualify&source=workflows-demo-prompt`,promptType:ht.DEMO_PROMPT}},[c.O]:{sequences:{href:"https://knowledge.hubspot.com/sequences/create-and-edit-sequences",promptType:ht.KB_ARTICLE},workflows:{href:"https://knowledge.hubspot.com/workflows/get-started-with-workflows",promptType:ht.KB_ARTICLE},products:{href:"https://knowledge.hubspot.com/deals/how-do-i-use-products",promptType:ht.KB_ARTICLE},quotes:{href:"https://knowledge.hubspot.com/deals/use-quotes",promptType:ht.KB_ARTICLE},forecasting:{href:"https://knowledge.hubspot.com/forecast/set-up-the-forecast-tool",promptType:ht.KB_ARTICLE}}},gt=C.a.div.withConfig({displayName:"BasePrompt__StickyContainer",componentId:"sc-2ekwvv-0"})(["position:fixed;bottom:90px;right:16px;z-index:100;width:450px;box-shadow:2px 2px 7px ",";"],R.FLINT);var ft=({headerText:t,bodyText:e,cta:r,handleClose:a,dataTestId:s})=>Object(X.jsx)(gt,{"data-test-id":s,children:Object(X.jsxs)(L.a,{children:[Object(X.jsx)(q.a,{onClick:a,"data-test-id":s+"-close"}),Object(X.jsx)(B.a,{children:Object(X.jsx)(U.a,{children:t})}),Object(X.jsx)($.a,{children:e}),Object(X.jsx)(D.a,{children:r})]})});const wt=(t,e,r)=>({app:e,screen:"index",uniqueId:"trial-"+r,upgradeProduct:t}),It=({app:t,activeTrials:e,expiredTrials:r,isMultiTrial:a,upgradeProduct:s,setShowPrompt:i})=>{const{href:o,promptType:c}=jt[s][t];Object(n.useEffect)(()=>{Object(K.a)("trialActionPromptInteraction",Object.assign({action:"viewed contextual prompt"},wt(s,t,c),{isMultiTrial:a,activeTrials:e,expiredTrials:r}))},[t,s,c,a,e,r]);const l=()=>{Object(K.a)("trialActionPromptInteraction",Object.assign({action:"closed contextual prompt"},wt(s,t,c),{isMultiTrial:a,activeTrials:e,expiredTrials:r}));i&&i(!1)},p=()=>{Object(K.b)("trialActionPromptInteraction",Object.assign({action:"clicked contextual prompt"},wt(s,t,c),{isMultiTrial:a,activeTrials:e,expiredTrials:r}))};return Object(X.jsx)(ft,{dataTestId:"contextual-trial-prompt",headerText:Object(X.jsx)(S.a,{message:`trial-components-library.trialPrompts.guidance.${s}.${t}.title`}),bodyText:Object(X.jsx)(S.a,{message:`trial-components-library.trialPrompts.guidance.${s}.${t}.body`}),cta:Object(X.jsx)(N.a,{"data-test-id":"contextual-trial-prompt-cta",use:"primary",onClick:p,href:o,external:!0,children:c===ht.DEMO_PROMPT?Object(X.jsx)(S.a,{message:"trial-components-library.trialPrompts.cta.viewDemo"}):Object(X.jsx)(S.a,{message:"trial-components-library.trialPrompts.cta.learnMore"})}),handleClose:l})};It.propTypes={app:s.a.string,activeTrials:s.a.array.isRequired,expiredTrials:s.a.array.isRequired,isMultiTrial:s.a.bool.isRequired,upgradeProduct:s.a.string,setShowPrompt:s.a.bool};var At=It;const Pt=()=>Ot(Et).then(t=>t).catch(t=>{const e=t;if(!("status"in e)||404!==e.status){console.error("Error fetching json blob for contextual prompt",e);o.a.captureException(e)}return{}}),Et="trials:contextual-prompts",vt=(t,e)=>`${t}-${e}`,yt=(t,e)=>{if(!e)return;return Object.keys(jt).find(r=>!!jt[r][t]&&e.includes(r))};var Mt=({app:t})=>{const[e,r]=Object(n.useState)(!1),[a,s]=Object(n.useState)(void 0),{activeTrials:i,expiredTrials:c,isMultiTrial:l,isLoadingTrackingProps:p}=x();Object(n.useEffect)(()=>{p||Promise.all([bt(),Pt()]).then(([e,a])=>{const o=yt(t,i),n=!!o,c=vt(o,t),l=!!!a[c]&&e&&n;s(o);r(l);l&&xt(Et,Object.assign({},a,{[c]:!0}))}).catch(e=>{o.a.captureException(new Error("Error setting up ContextualTrialPrompt data"),{extra:{error:e,app:t}})})},[i,t,p]);return e&&!p&&a?Object(X.jsx)(it,{boundaryName:"TrialsContextualPrompt",children:Object(X.jsx)(At,{app:t,activeTrials:i,expiredTrials:c,isMultiTrial:l,upgradeProduct:a,setShowPrompt:r})}):null};const _t=({app:t})=>Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(rt,{app:t}),Object(X.jsx)(Mt,{app:t})]});_t.propTypes={app:s.a.string};var Ct=_t;r.d(e,"WEBPACK_3_FORCE_MODULE_IMPORT",(function(){return Rt}));e.default=Ct;const Rt=1}}]);
//# sourceMappingURL=//static.hsappstatic.net/setup-guide-ui/static-1.32019/GrowthDashboardModalContainer.js.map